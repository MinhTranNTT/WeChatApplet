(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["mySubPkg-updateCamper-updateCamper"],{"368e":function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return i})),a.d(t,"a",(function(){return r}));var r={uniForms:a("ca9a").default,uniFormsItem:a("45ca").default,uniEasyinput:a("9817").default,uniDataCheckbox:a("074c").default,uniDatetimePicker:a("82b4").default,uniDataSelect:a("62dd").default},n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",[a("v-uni-view",{staticClass:"title"},[a("v-uni-view",{staticClass:"main-title"},[e._v("更新营员信息")]),a("v-uni-view",{staticClass:"sub-title"},[a("v-uni-view",{attrs:{id:"one"}},[e._v("（标有")]),a("v-uni-view",{attrs:{id:"two"}},[e._v("*")]),a("v-uni-view",{attrs:{id:"one"}},[e._v("为必填）")])],1)],1),a("v-uni-view",{staticClass:"form-data"},[a("uni-forms",{ref:"camperForm",attrs:{modelValue:e.camperInfo,validateTrigger:"bind",labelWidth:"103px",labelAlign:"left",labelPosition:"left"}},[a("uni-forms-item",{attrs:{label:"姓名",name:"name",required:!0}},[a("uni-easyinput",{attrs:{type:"text",placeholder:"请输入姓名"},model:{value:e.camperInfo.name,callback:function(t){e.$set(e.camperInfo,"name",t)},expression:"camperInfo.name"}})],1),a("uni-forms-item",{attrs:{label:"性别",name:"gender",required:!0}},[a("uni-data-checkbox",{attrs:{localdata:e.genderRange},model:{value:e.camperInfo.gender,callback:function(t){e.$set(e.camperInfo,"gender",t)},expression:"camperInfo.gender"}})],1),a("uni-forms-item",{attrs:{label:"出生日期",name:"birthday",required:!0}},[a("uni-datetime-picker",{attrs:{type:"date"},model:{value:e.camperInfo.birthday,callback:function(t){e.$set(e.camperInfo,"birthday",t)},expression:"camperInfo.birthday"}})],1),a("uni-forms-item",{attrs:{label:"衣服尺寸",name:"clothSize",required:!0}},[a("uni-data-select",{attrs:{localdata:e.clothSizeRange},model:{value:e.camperInfo.clothSize,callback:function(t){e.$set(e.camperInfo,"clothSize",t)},expression:"camperInfo.clothSize"}})],1),a("uni-forms-item",{attrs:{label:"证件类型",name:"typeOfCerti",required:!0}},[a("uni-data-select",{attrs:{localdata:e.certificateTypeRange},model:{value:e.camperInfo.typeOfCerti,callback:function(t){e.$set(e.camperInfo,"typeOfCerti",t)},expression:"camperInfo.typeOfCerti"}})],1),0==e.camperInfo.typeOfCerti||10==e.camperInfo.typeOfCerti?a("uni-forms-item",{attrs:{label:"有效证件号",name:"validIdNumber",required:!0}},[a("uni-easyinput",{attrs:{type:"idcard",placeholder:"请输入有效证件号"},model:{value:e.camperInfo.validIdNumber,callback:function(t){e.$set(e.camperInfo,"validIdNumber",t)},expression:"camperInfo.validIdNumber"}})],1):a("uni-forms-item",{attrs:{label:"有效证件号",name:"otherIdNumber",required:!0}},[a("uni-easyinput",{attrs:{type:"idcard",placeholder:"请输入有效证件号"},model:{value:e.camperInfo.otherIdNumber,callback:function(t){e.$set(e.camperInfo,"otherIdNumber",t)},expression:"camperInfo.otherIdNumber"}})],1),a("uni-forms-item",{attrs:{label:"在读学校",name:"school",required:!0}},[a("uni-easyinput",{attrs:{type:"text",placeholder:"请输入在读学校"},model:{value:e.camperInfo.school,callback:function(t){e.$set(e.camperInfo,"school",t)},expression:"camperInfo.school"}})],1),a("uni-forms-item",{attrs:{label:"在读年级",name:"grade",required:!0}},[a("uni-easyinput",{attrs:{type:"text",placeholder:"请输入在读年级"},model:{value:e.camperInfo.grade,callback:function(t){e.$set(e.camperInfo,"grade",t)},expression:"camperInfo.grade"}})],1),a("uni-forms-item",{attrs:{label:"监护人姓名",name:"guardianName",required:!0}},[a("uni-easyinput",{attrs:{type:"text",placeholder:"请输入监护人姓名"},model:{value:e.camperInfo.guardianName,callback:function(t){e.$set(e.camperInfo,"guardianName",t)},expression:"camperInfo.guardianName"}})],1),a("uni-forms-item",{attrs:{label:"监护人手机号",name:"phone",required:!0}},[a("uni-easyinput",{attrs:{type:"text",placeholder:"请输入监护人手机号"},model:{value:e.camperInfo.phone,callback:function(t){e.$set(e.camperInfo,"phone",t)},expression:"camperInfo.phone"}})],1),a("v-uni-button",{attrs:{type:"primary"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.submit.apply(void 0,arguments)}}},[e._v("提交")])],1)],1),a("v-uni-view",{staticClass:"empty-area"})],1)},i=[]},aa2c:function(e,t,a){"use strict";a.r(t);var r=a("368e"),n=a("bf0c");for(var i in n)["default"].indexOf(i)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(i);a("dd80");var o=a("f0c5"),u=Object(o["a"])(n["default"],r["b"],r["c"],!1,null,"39ad6c2f",null,!1,r["a"],void 0);t["default"]=u.exports},bf0c:function(e,t,a){"use strict";a.r(t);var r=a("cb3a"),n=a.n(r);for(var i in r)["default"].indexOf(i)<0&&function(e){a.d(t,e,(function(){return r[e]}))}(i);t["default"]=n.a},c892:function(e,t,a){var r=a("24fb");t=r(!1),t.push([e.i,'@charset "UTF-8";\n/* 水平间距 */\n/* 水平间距 */.title[data-v-39ad6c2f]{display:flex;flex-direction:row;height:%?100?%;width:%?674?%;justify-content:center;margin:0 %?38?% 0 %?38?%;border-bottom:#999 solid 1px;align-items:center}.title .main-title[data-v-39ad6c2f]{font-size:%?35?%;font-weight:700}.title .sub-title[data-v-39ad6c2f]{display:flex;flex-direction:row;height:%?45?%;align-items:flex-end}.title .sub-title #one[data-v-39ad6c2f]{font-size:%?25?%;color:#999}.title .sub-title #two[data-v-39ad6c2f]{-webkit-columns:#ff3b3b;columns:#ff3b3b;font-size:%?25?%}.form-data[data-v-39ad6c2f]{width:%?674?%;margin:%?30?% %?38?% %?30?% %?38?%}.empty-area[data-v-39ad6c2f]{height:%?100?%}',""]),e.exports=t},cb3a:function(e,t,a){"use strict";a("7a82");var r=a("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a("3835")),i=r(a("c7eb")),o=r(a("1da1"));a("ac1f"),a("00b4"),a("a434");a("a050");var u={data:function(){return{camperInfo:{photoUrl:""},campersList:[],photoPath:{},genderRange:[{value:0,text:"男"},{value:1,text:"女"}],clothSizeRange:[{value:0,text:"110"},{value:1,text:"120"},{value:2,text:"130"},{value:3,text:"140"},{value:4,text:"150"},{value:5,text:"160"},{value:6,text:"170"},{value:7,text:"180"},{value:8,text:"190"}],certificateTypeRange:[{value:0,text:"身份证"},{value:1,text:"护照"},{value:2,text:"台胞证"},{value:3,text:"回乡证"}],imageStyles:{width:90,height:90,border:{color:"#EEEEEE",width:2,style:"dashed",radius:"1px"}},customRules:{name:{rules:[{required:!0,errorMessage:"请输入姓名"},{minLength:1,maxLength:20,errorMessage:"姓名长度在{minLength}到{maxLength}个字符之间"}]},gender:{rules:[{required:!0,errorMessage:"请选择性别"}]},birthday:{rules:[{required:!0,errorMessage:"请选择出生日期"}]},clothSize:{rules:[{required:!0,errorMessage:"请选择衣服尺寸"}]},typeOfCerti:{rules:[{required:!0,errorMessage:"请选择证件类型"}]},validIdNumber:{rules:[{required:!0,errorMessage:"请输入有效证件号"},{validateFunction:function(e,t,a,r){if(18!==t.length)r("身份证位数应为18位");else{if(/^\d{6}(18|19|20)?\d{2}(0[1-9]|1[012])(0[1-9]|[12]\d|3[01])\d{3}(\d|X)$/.test(t))if({11:"北京",12:"天津",13:"河北",14:"山西",15:"内蒙古",21:"辽宁",22:"吉林",23:"黑龙江 ",31:"上海",32:"江苏",33:"浙江",34:"安徽",35:"福建",36:"江西",37:"山东",41:"河南",42:"湖北 ",43:"湖南",44:"广东",45:"广西",46:"海南",50:"重庆",51:"四川",52:"贵州",53:"云南",54:"西藏 ",61:"陕西",62:"甘肃",63:"青海",64:"宁夏",65:"新疆",71:"台湾",81:"香港",82:"澳门",91:"国外"}[t.substr(0,2)]){for(var n=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2],i=0,o=0;o<17;o++)i+=t[o]*n[o];var u=["1","0","X","9","8","7","6","5","4","3","2"][i%11];u!==t[17]&&r("身份证校验位错误")}else r("身份证地址编码错误");else r("身份证格式错误")}return!0}},{}]},otherIdNumber:{rules:[{required:!0,errorMessage:"请输入有效证件号"}]},school:{rules:[{required:!0,errorMessage:"请输入在读学校"}]},grade:{rules:[{required:!0,errorMessage:"请输入在读年级"}]},guardianName:{rules:[{required:!0,errorMessage:"请输入监护人姓名"}]},phone:{rules:[{required:!0,errorMessage:"请输入监护人手机号"},{validateFunction:function(e,t,a,r){/^1[3456789]\d{9}$/.test(t)||r("手机号格式不正确")}}]}}}},onLoad:function(e){this.camperInfo=uni.getStorageSync("campersList")[e.campersList_index]},onReady:function(){this.$refs.camperForm.setRules(this.customRules)},methods:{onLoadOrder:function(){return(0,o.default)((0,i.default)().mark((function e(){return(0,i.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},updateCampers:function(){var e=this;return(0,o.default)((0,i.default)().mark((function t(){var a,r,n;return(0,i.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e,t.next=3,uni.$http.put("/user/camper/update",a.camperInfo);case 3:return t.next=5,uni.getStorageSync("campersList");case 5:r=t.sent,n=0;case 7:if(!(n<r.length)){t.next=16;break}if(r[n].id!==a.camperInfo.id){t.next=13;break}return r.splice(n,1),r.splice(n,0,a.camperInfo),t.next=13,uni.setStorageSync("campersList",r);case 13:n++,t.next=7;break;case 16:case"end":return t.stop()}}),t)})))()},submit:function(){var e=this;return(0,o.default)((0,i.default)().mark((function t(){var a,r;return(0,i.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e,t.next=3,e.$refs.camperForm.validate().catch((function(e){uni.showToast({title:"请根据提示完善信息!",icon:"none"})}));case 3:if(r=t.sent,!r){t.next=11;break}return t.next=7,a.updateCampers();case 7:return t.next=9,uni.showToast({title:"修改成功",position:"top",icon:"none",mask:!0,duration:2e3});case 9:return t.next=11,uni.navigateBack();case 11:case"end":return t.stop()}}),t)})))()},select:function(e){var t=this;return(0,o.default)((0,i.default)().mark((function a(){var r,o,u,s,c,l;return(0,i.default)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(r=t,o=r.camperInfo.photoUrl,e&&!o){a.next=5;break}return a.next=5,uni.$http.post("/user/file/delete",o);case 5:return u=e.tempFilePaths[0],a.next=8,uni.$uploadFile(u);case 8:s=a.sent,c=(0,n.default)(s,2),c[0],l=c[1],r.camperInfo.photoUrl=l.data;case 13:case"end":return a.stop()}}),a)})))()},progress:function(e){console.log(e)},success:function(e){console.log("上传成功"+e)}}};t.default=u},dd80:function(e,t,a){"use strict";var r=a("f8b8"),n=a.n(r);n.a},f8b8:function(e,t,a){var r=a("c892");r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var n=a("4f06").default;n("9ad02d46",r,!0,{sourceMap:!1,shadowMode:!1})}}]);